---
import { getCollection } from "astro:content";
import Layout from '../layout/page.astro';
const blogs = await getCollection("blog");

---

<Layout>
    <section class="blog-entries">
        <h1>Blogs</h1>
        <ul>
            {blogs.map((blog) => (
                <div class="post">
                    <h2>
                    <a href={`/blog/${blog.slug}`}>{blog.data.title}</a>
                    </h2>
                    <time datetime={blog.data.date.toISOString()}>{blog.data.date.toDateString()}</time>
                    <p>{blog.data.description}</p>
                    <a href={`/blog/${blog.slug}`}>Read post</a>
                     </div>
            ))}
        </ul>
    </section>
    <p class="feed">
        <a href="/rss.xml">
        <span role="img" aria-label="'satelite disg">ðŸ“¡</span>
        <span>Subscribe to feeds</span>
        <link rel="alternate" type="application/rss+xml" href="/rss.xml" title="Sandwich Blog"  />
    </a>
    </p>
</Layout>


<style>
.post {
	margin: 0;
}

.post:not(:first-of-type) {
	margin-top: 3rem;
}

.post h2 {
	margin: 0;
}

.post h2 a {
	color: inherit;
	text-decoration: none;
}

.post time {
	color: var(--color-gray-700);
	display: block;
	font-size: 0.875rem;
	margin: 0.5rem 0 0;
}

.post p {
	margin: 0.5rem 0 0;
}

.post .big-link {
	font-size: 0.875rem;
}

.feed {
	margin: 4rem 0 0;
}

.feed a {
	color: var(--color-gray-600);
	text-decoration: none;
}

.link-text {
	text-decoration: underline;
}

</style>

